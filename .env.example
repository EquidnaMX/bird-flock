# Bird Flock Example Environment
# -------------------------------------------------------------
# Core queue & table prefix configuration
BIRD_FLOCK_DEFAULT_QUEUE=messaging
BIRD_FLOCK_TABLE_PREFIX=bird_flock_
BIRD_FLOCK_DLQ_ENABLED=true

# Retry/backoff knobs (channel-specific)
BIRD_FLOCK_SMS_MAX_ATTEMPTS=5
BIRD_FLOCK_SMS_BASE_DELAY_MS=1000
BIRD_FLOCK_SMS_MAX_DELAY_MS=60000
BIRD_FLOCK_WHATSAPP_MAX_ATTEMPTS=5
BIRD_FLOCK_WHATSAPP_BASE_DELAY_MS=1000
BIRD_FLOCK_WHATSAPP_MAX_DELAY_MS=60000
BIRD_FLOCK_EMAIL_MAX_ATTEMPTS=5
BIRD_FLOCK_EMAIL_BASE_DELAY_MS=1000
BIRD_FLOCK_EMAIL_MAX_DELAY_MS=60000

# Twilio configuration
# Prefer a Messaging Service SID in production for number pooling and routing.
# Fallback to explicit FROM numbers when SID not set.
TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_AUTH_TOKEN=secret
TWILIO_MESSAGING_SERVICE_SID=MGxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# Explicit fallback single-number mode (uncomment if needed):
# TWILIO_FROM_SMS=+15555550100
# TWILIO_FROM_WHATSAPP=whatsapp:+15555550101
TWILIO_STATUS_WEBHOOK_URL=https://example.com/bird-flock/webhooks/twilio/status
TWILIO_SANDBOX_MODE=true
# Optional: force a sandbox 'from' value when sandbox mode is enabled. Useful for test accounts.
# TWILIO_SANDBOX_FROM=whatsapp:+15550000001
# Example: explicit sandbox pinned from for WhatsApp
# TWILIO_SANDBOX_FROM=whatsapp:+15550000001

# SendGrid configuration
SENDGRID_API_KEY=SG.xxxxxxxxxxxxxxxxxxxxxxxxxxxxx
SENDGRID_FROM_EMAIL=ops@example.com
SENDGRID_FROM_NAME=Ops Team
SENDGRID_REPLY_TO=reply@example.com
SENDGRID_REQUIRE_SIGNED_WEBHOOKS=false
# SENDGRID_WEBHOOK_PUBLIC_KEY= (set if signed webhooks required)

# Logging
BIRD_FLOCK_LOGGING_ENABLED=true
# BIRD_FLOCK_LOG_CHANNEL=stack

# Health check endpoints
BIRD_FLOCK_HEALTH_ENABLED=true

# Idempotency key guidance:
# Use structured stable keys combining tenant/account + domain + purpose.
# Examples:
#   TENANT42:ORDER1234:SHIPPING_SMS  (legacy uppercase)
#   tenant:42:order:1234:shipping-sms (recommended lowercase colon-delimited)
#   acct:7:otp:2025-11-28:+15555550100
# Keep length reasonable (<160 chars); include channel when relevant.

